<!DOCTYPE html>
<html>
<head>
	<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
	<script src="https://raw.githack.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>
</head>
<body>
<!--   <a-scene stats embedded arjs='trackingMethod: best; debugUIEnabled: false'>
        <a-marker preset="hiro">
        <a-box position='0 1 0' material='color: blue;'>
        </a-box>
        </a-marker>
        <a-entity camera></a-entity>
  </a-scene> -->

    <script>
      //Multi Markers WebAR-AR.js and Aframe - Playing the Archive - Connected Environment CASA-UCL

      //Global Variable
      var markersURLArray=[];
      var markersNameArray=[];

      AFRAME.registerComponent('markers_start',{
        init:function(){
          console.log('Add markers to the scene');



          var sceneEl = document.querySelector('a-scene');
          
          //list of the markers
          for(var i=1; i<6; i++)
          {
            var url="resources/markers/pattern-Individual_Blocks-"+i+".patt";
            markersURLArray.push(url);
            markersNameArray.push('Marker_'+i);
            //console.log(url);
          }

          for(var k=0; k<5; k++)
          {
            var markerEl = document.createElement('a-marker');
            markerEl.setAttribute('type','pattern');
            markerEl.setAttribute('url',markersURLArray[k]);
            markerEl.setAttribute('id',markersNameArray[k]);

            markerEl.setAttribute('registerevents','');
            sceneEl.appendChild(markerEl);



            //Adding text to each marker
            var textEl = document.createElement('a-entity');
            
            textEl.setAttribute('id','text');
            textEl.setAttribute('text',{color: 'red', align: 'center', value:markersNameArray[k], width: '5.5'});
            textEl.object3D.position.set(0, 0.7, 0);
            textEl.object3D.rotation.set(90, 0, 0);

            markerEl.appendChild(textEl);
          }




            var planeEl = document.createElement('a-plane');
            planeEl.setAttribute('color','#680');
            planeEl.setAttribute('height', '3');
            planeEl.setAttribute("width", "3");
            planeEl.setAttribute('position', '0 0 -5')
            planeEl.setAttribute('material',{opacity: '0.3'});
            planeEl.setAttribute('trnsparent',"true");
            planeEl.setAttribute('rotate', '0 45 0');
            sceneEl.appendChild(planeEl);

            
            var textEl = document.createElement('a-text');
            textEl.setAttribute('id','text');
            textEl.setAttribute('text',{color: '#886600', align: 'left', value:'This is a very log text /b \n line which might or might not wrap', width: '2.5', });
            textEl.setAttribute('position', '-1.25 1.25 0')
            //textEl.setAttribute('geometry', "primitive:plane, color:red");
            // textEl.object3D.position.set(0, -5.4, 0);
            // textEl.object3D.rotation.set(90, 0, 0);
            planeEl.appendChild(textEl);



                     
       
        }
        
      });


      //Detect marker found and lost
      AFRAME.registerComponent('registerevents', {
          init: function () {
            const marker = this.el;

            marker.addEventListener("markerFound", ()=> {
              var markerId = marker.id;
              console.log('Marker Found: ', markerId);
            });

            marker.addEventListener("markerLost",() =>{
              var markerId = marker.id;
              console.log('Marker Lost: ', markerId);
            });
          },
        });

        </script> 
        


     <a-scene markers_start vr-mode-ui="enabled: false" color-space="sRGB" renderer="gammaOutput: true"
            embedded arjs='debugUIEnabled: false; sourceType: webcam; patternRatio: 0.85; trackingMethod: best;'>  
              <a-entity id='userCamera' camera> 
                <a-cursor> </a-cursor> 
              </a-entity> 
            </a-scene>  


    <!-- <a-scene markers_start >
      <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
      <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
      <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
 -->

</body>
</html>
